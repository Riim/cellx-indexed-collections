!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("cellx")):"function"==typeof define&&define.amd?define(["exports","cellx"],t):t(e.cellxIndexedCollections=e["cellx-indexed-collections"]=e.cellxIndexedCollections||{},e.cellx)}(this,function(e,t){"use strict";var n=t.ObservableCollectionMixin.prototype,i=n._registerValue,l=n._unregisterValue,r=t.JS.Map,s=t.Utils.nextUID,o=t.ObservableCollectionMixin.extend({constructor:function(e){this._indexesConfig=e&&e.indexes?e.indexes.map(function(e){return"string"==typeof e?{keyName:e}:e}):[{keyName:"id",keyGenerator:s}],this._indexes=Object.create(null)},_registerValue:function(e){if(e===Object(e))for(var t=this._indexesConfig,n=this._indexes,l=t.length;l;){var s=t[--l],o=s.keyName,a=n[o]||(n[o]=new r),c=e[o];if(null==c){var u=s.keyGenerator;if(u){do c=u();while(a.has(c));Object.defineProperty(e,o,{configurable:!1,enumerable:!1,writable:!1,value:c})}}if(null!=c){var f=a.get(c);f?f.push(e):a.set(c,[e])}}i.call(this,e)},_unregisterValue:function(e){if(e===Object(e))for(var t=this._indexesConfig,n=this._indexes,i=t.length;i;){var r=t[--i].keyName,s=e[r];if(null!=s){var o=n[r],a=o.get(s);1==a.length?o.delete(s):a.pop()}}l.call(this,e)},clear:function(){this._indexes=Object.create(null),Object.getPrototypeOf(this.constructor.prototype).clear.call(this)}}),a=t.ObservableMap.prototype,c=a.contains,u=a.get,f=t.ObservableMap.extend({Implements:[o],constructor:function(e,n){o.call(this,n),t.ObservableMap.call(this,e,n)},contains:function(e,t){if(arguments.length>=2){var n=this._indexes[t];return!!n&&n.has(e)}return c.call(this,e)},get:function(e,t){if(!(arguments.length>=2))return u.call(this,e);var n=this._indexes[t];if(n){var i=n.get(e);return i&&i[i.length-1]}}}),d=t.ObservableList.prototype,h=d.contains,x=d.get,p=t.ObservableList.extend({Implements:[o],constructor:function(e,n){o.call(this,n),t.ObservableList.call(this,e,n)},contains:function(e,t){if(arguments.length>=2){var n=this._indexes[t];return!!n&&n.has(e)}return h.call(this,e)},get:function(e,t){if(!(arguments.length>=2))return x.call(this,e);var n=this._indexes[t];if(n){var i=n.get(e);return i&&i[i.length-1]}}});e.IndexedCollectionMixin=o,e.IndexedMap=f,e.IndexedList=p,Object.defineProperty(e,"__esModule",{value:!0})});