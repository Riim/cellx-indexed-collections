# cellx-indexed-collections

`IndexedMap` и `IndexedList` наследуют от [cellx.ObservableMap](https://github.com/Riim/cellx/blob/master/README.ru.md#cellxobservablemap) и [cellx.ObservableList](https://github.com/Riim/cellx/blob/master/README.ru.md#cellxobservablelist) соответственно.  
К возможностям родительских коллекций добавляется возможность указать опцию `indexes` в параметре `options` конструкторов. Значением опции может быть массив строк, которые являются именами свойств по которым будут строится индексы. Индексы позволяют делать эффективные выборки по значениям свойств без их полного перебора. Например:

```js
import { IndexedList } from 'cellx-indexed-collections';

let books = new IndexedList([
    { id: '1', name: 'Гарри Поттер и философский камень' },
    { id: '2', name: 'Гарри Поттер и узник Азкабана' },
    { id: '3', name: 'Гарри Поттер и Кубок Огня' },
    { id: '4', name: 'Унесенные ветром' },
    { id: '5', name: 'Зеленая миля' },
    { id: '6', name: 'Крестный отец' },
    /* ... и ещё 100500 записей */
], { indexes: ['id', 'name'] });

// используя индекс `id` выбираем соответствующую запись,
// при этом перебора значений списка происходить не будет,
// для поиска будет использована внутренняя хеш-таблица
console.log(books.get('4', 'id'));
// => { id: '4', name: 'Унесенные ветром' }

// выборка по имени
console.log(books.get('Зеленая миля', 'name'));
// => { id: '5', name: 'Зеленая миля' }

// наследуемый функционал полностью сохранён
console.log(books.get(5));
// => { id: '6', name: 'Крестный отец' }
```

Важно помнить, что первичное построение индексов и поддержание их в актуальном состоянии замедляет инициализацию коллекции и все операции её изменения, поэтому индексы должны строиться только по часто используемым для выборок полям.

Индексы обновляются только при добавлении и удалении записей, то есть если изменять уже сделанную запись, то индекс обновляться не будет. Для обновления нужно удалить запись, сделать в ней изменение и вернуть обратно в коллекцию.

Если две или более записи имеют индексируемое свойство с одинаковым значением, то при выборке по нему будет возвращаться последняя добавленная запись.
